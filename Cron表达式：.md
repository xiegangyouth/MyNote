# Cron表达式

## 语法格式：

+ `6个域`：second（秒）minute（分）hour（时）day（日）month（月）week（周）
+ 7个域：second（秒）minute（分）hour（时）day（日）month（月）week（周）year（年）

## 各字段含义：

| 位置 | 域名 | 是否必填 | 允许值                                 | 允许的特殊字符 |
| :--- | :--- | :------: | :------------------------------------- | :------------- |
| 1    | 秒   |    是    | 0-59                                   | , - * /        |
| 2    | 分   |    是    | 0-59                                   | , - * /        |
| 3    | 时   |    是    | 0-23                                   | , - * /        |
| 4    | 日   |    是    | 1-31                                   | - * ? / L W    |
| 5    | 月   |    是    | 1-12 or JAN-DEC                        | , - * /        |
| 6    | 周   |    是    | 1-7 or SUN-SAT（1代表周日，7代表周六） | , - * ? / L #  |
| 7    | 年   |    否    | empty 或 1970-2099                     | , - * /        |

> 注：由于"月份中的日期"和"星期中的日期"这两个元素互斥的,必须要对其中一个设置通配符"?".

## 通配符含义：

| 符号 | 意义                                                         | 举例/说明                                                    |
| :--: | ------------------------------------------------------------ | ------------------------------------------------------------ |
|  ?   | 无意义值，相当于占位符                                       | 只在`周`和`日`中使用                                         |
|  *   | 可用于所有时间域，表示该时间域的每一个时刻                   | `cron="8 20 12 * 4 ?"`=`4月份每天中午12点20分8秒`            |
|  ,   | 多值连接                                                     | 如在小时域上设置“7,9”，表示在7点和9点均触发                  |
|  -   | 区间                                                         | 如在小时域设置“7-9”，表示在7，8，9点均进行触发               |
|  /   | 间隔，表达一个等步长序列，x为起始值，y为增量步长值           | `cron="2 59 0/25 13 * 2 ？"`=`2月份每天的"13:00:02"，13:25:02,13:50:02` |
|  L   | 该字符只在<code>日期域</code>和<code>星期域</code>中使用，代表<code>Last</code>的意思，但它在两个域中的意义不同 | `日`：当前月份的最后一天，如1月31日，非闰年2月28日；<br>`周`：表示星期六，同等于7。但如果出现在星期域中，而且在前面还有一个数值X，则表示“这个月的最后一个”，例如：5L表示该月的最后一个星期四 |
|  W   | 该字符只能出现在<code>日期域</code>中，表示离该日期最近的`工作日` | 如<code>12W</code>表示离该月<code>12号</code>最近的<code>工作日</code>，如果该月的<code>12号</code>是<code>星期六</code>，则匹配<code>11号星期五</code>；如果<code>12号</code>是<code>星期日</code>，则匹配<code>13号星期一</code>；如果<code>12号</code>是<code>星期三</code>，那结果就是<code>星期三</code>。但必须注意<code>关联的匹配日期不能够跨月</code>，如指定<code>1W</code>,如果<code>1号</code>是<code>星期六</code>，那么结果就是<code>3号星期一</code>，而非上个月的最后的那天。<code>W</code>只能指定单一日期，而不能指定日期范围。 |
|  #   | 该字符只能在<code>星期域</code>中使用，表示<code>当月的第几个周几</code> | 如`6#3`，表示当月的第3个星期五`6表示星期五，#3表示当月的第3个` |

## 代码示例：

### 秒

`cron="8 * * * * ?"`

以上表达式含义为：每分钟的第 8 秒执行。秒后面的时间域是分钟，*（星号）表示<code>每...</code>，这里表示<code>每分钟</code>。

> 注意:是每分钟的第 8 秒，不是每隔 8 秒

### 秒+分

`cron="8 20 * * * ?"`

以上表达式含义为：每小时的第 20 分，第 8 秒执行 。分钟后的时间域是小时，由于是 *（星号），所以代表每小时。

### 秒+分+ 时

`cron="8 20 12 * * ?"`

以上表达式含义为：每天中午 12 点 20 分 8 秒执行。小时后的时间域是天，*（星号）表示每天。

> 注意：时间的范围是 0-23，即 24 时制。所以 12 表示中午 12 点，如果表示午夜 12 点，表达式应该为：cron=8 20 0 * * ?

### 秒+分+小时+日

`cron="8 20 12 31 * ?"`

以上表达式含义为：每个月的 31 号中午 12 点 20 分 8 秒执行。

> 注意：
>
> 1、`如果某个月份中不包含 31 号，则不执行；`
>
> 2、如果表达式为 cron="8 20 12 31 4 ?"，启动项目时将会报错： 4 月份没有 31 号，此表达式永远都不会执行，所以月份与日要配合使用

### 秒+分+小时+日+月

`cron="8 20 12 30 4 ?"`

以上表达式含义为：4 月 30 号中午 12 点 20 分 8 秒执行。

### 秒+分+小时+日+月+星期

`cron="8 20 12 30 4 3"`

星期域具有特殊性，它由 1-7 组成，1 表示星期日（一周的开始），7 表示星期六（一周的最后一天）；星期的定义与日和月同时表示，有可能会有冲突。

> 以上表达式，看着好像是 <code>星期二 4 月 30 号 中午 12 点 20 分 8 秒</code>这个意思，但实际上并不一定，原因很简单，你怎么就知道 4 月 30 号正好是星期二呢？所以这样定义表达式是存在问题的，也就是说<code>星期</code>和<code>日</code>在某种程度上是有<code>冲突</code>的。所以一般要在<code>星期</code>和<code>日</code>之间作出<code>取舍</code>。即`定义了星期，就不定义日；定义了日，就不定义星期。不需要定义的时候使用?占位，舍弃谁谁就用`

`cron="8 20 12 ? 4 2"`

以上表达式含义为：`4 月份的每个星期 1 的中午 12 点 20 分 8 秒`